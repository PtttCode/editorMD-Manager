
function saveFile(editor){
    $.ajaxSetup({contentType: "application/json; charset=utf-8"});
    data = JSON.stringify({'authorName':"pt", 'filename':"golang-knowledge", "content": editor.getMarkdown()})
    $.post("/savemd", data, function(data, status){
        console.log(data, status, data.Code)
        if (data.Code == 0){
            successTip(data.Msg, 1500)
        }else{
            dangerTip(data.Msg, 1500)
        }
    });
}


function ShowTip(message, style, time)
{
    style = (style === undefined) ? 'alert-success' : style;
    time = (time === undefined) ? 1200 : time;
    $('<div>')
        .appendTo('body')
        .addClass('alert ' + style)
        .html(message)
        .show()
        .delay(time)
        .fadeOut();
};

// 成功提示
function successTip(message, time)
{
    ShowTip(message, 'alert-success', time);
};

// 失败提示
function dangerTip(message, time)
{
    ShowTip(message, 'alert-danger', time);
};

// 提醒
function warningTip(message, time)
{
    ShowTip(message, 'alert-warning', time);
};

// 信息提示
function infoTip(message, time)
{
    ShowTip(message, 'alert-info', time);
};

function themeSelect(id, themes, lsKey, callback)
{
    var select = $("#" + id);
    
    for (var i = 0, len = themes.length; i < len; i ++)
    {                    
        var theme    = themes[i];
        var selected = (localStorage[lsKey] == theme) ? " selected=\"selected\"" : "";
        
        select.append("<option value=\"" + theme + "\"" + selected + ">" + theme + "</option>");
    }
    
    select.bind("change", function(){
        var theme = $(this).val();
        
        if (theme === "")
        {
            alert("theme == \"\"");
            return false;
        }
        
        console.log("lsKey =>", lsKey, theme);
        
        localStorage[lsKey] = theme;
        callback(select, theme);
    }); 
    
    return select;
}

function readLatestFile(editor){ 
    authorName = "pt"
    $.get("/getLatestDoc", {"authorName": authorName}, function(data){
        if(data.Code == 0){
            console.log(data)
            $(".mainArea").val(data.Msg)
        }
    })
} 